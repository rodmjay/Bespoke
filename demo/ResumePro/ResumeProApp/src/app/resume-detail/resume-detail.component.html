<div class="card">
  <div *ngIf="loading" class="loading">
    <p-progressSpinner></p-progressSpinner>
  </div>
  
  <div *ngIf="error" class="error">
    <p>{{ error }}</p>
  </div>
  
  <div *ngIf="resume && !loading" class="resume-details">
    <h2>{{ resume.firstName }} {{ resume.lastName }} - {{ resume.jobTitle }}</h2>
    
    <div class="description">
      <h3>Description</h3>
      <p>{{ resume.description }}</p>
    </div>
    
    <div class="skills">
      <h3>Skills</h3>
      <div *ngIf="resume.skillDictionary && resume.skillDictionary.length > 0">
        <div *ngFor="let category of resume.skillDictionary" class="skill-category">
          <h4>{{ category.category }}</h4>
          <p-chip *ngFor="let skill of category.skills" 
                  [label]="skill.title + ' (' + skill.rating + ')'" 
                  styleClass="m-1"></p-chip>
        </div>
      </div>
      <div *ngIf="!resume.skillDictionary || resume.skillDictionary.length === 0">
        No skills found.
      </div>
    </div>
    
    <div class="companies">
      <h3>Experience</h3>
      <div *ngIf="resume.companies && resume.companies.length > 0">
        <p-accordion>
          <p-accordionTab *ngFor="let company of resume.companies" 
                          [header]="company.name + ' - ' + company.location">
            <div *ngFor="let position of company.positions" class="position">
              <h4>{{ position.title }}</h4>
              <p>{{ position.startDate | date }} - {{ position.endDate | date }}</p>
              <p>{{ position.description }}</p>
              
              <div *ngIf="position.projects && position.projects.length > 0" class="projects">
                <h5>Projects</h5>
                <ul>
                  <li *ngFor="let project of position.projects">
                    <strong>{{ project.name }}</strong>: {{ project.description }}
                  </li>
                </ul>
              </div>
            </div>
          </p-accordionTab>
        </p-accordion>
      </div>
      <div *ngIf="!resume.companies || resume.companies.length === 0">
        No experience found.
      </div>
    </div>
  </div>
</div>
