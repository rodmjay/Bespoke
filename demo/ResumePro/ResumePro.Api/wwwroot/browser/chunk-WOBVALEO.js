import{a as De}from"./chunk-QDPEBS4C.js";import{a as Me,b as we}from"./chunk-Y6HZP4KD.js";import{a as Se,b as xe}from"./chunk-AL4XRLEA.js";import{a as ke,b as he}from"./chunk-LGBLDQX5.js";import"./chunk-K4SGUUR5.js";import{a as Ce,b as ve}from"./chunk-BP7MNUJP.js";import{a as be,b as _e}from"./chunk-COXNR3KN.js";import{a as Te,b as ye}from"./chunk-NMHADN5P.js";import"./chunk-UKFDZ5NH.js";import{a as pe,b as ce}from"./chunk-5QABPFLC.js";import{a as le,b as me}from"./chunk-BQWXN4DA.js";import"./chunk-LAKTUHSI.js";import"./chunk-SGUPKBVV.js";import"./chunk-P63N2URC.js";import"./chunk-2AJWNTIY.js";import"./chunk-JJQLEQOL.js";import{a as fe,b as ge}from"./chunk-GXMOM5BD.js";import"./chunk-PAEO5PSF.js";import"./chunk-MLPLYTXL.js";import{b as ae}from"./chunk-DUGBXOMB.js";import"./chunk-AGR62YLL.js";import{a as se,b as re}from"./chunk-MEZEMTYB.js";import{b as ne,d as W,g as B,k as j}from"./chunk-SMJIQ4E4.js";import"./chunk-YUUY53IN.js";import"./chunk-3BQEJCHT.js";import{a as de,b as ue}from"./chunk-S4KTNRWB.js";import"./chunk-BDXJXXVS.js";import"./chunk-5ITMLF3G.js";import"./chunk-BODZH67C.js";import{d as x,f as M}from"./chunk-QXZQXA5D.js";import{g as S,h as P}from"./chunk-TI2YGS5M.js";import"./chunk-WCGJ44IN.js";import{oa as F,sa as oe}from"./chunk-ZHGKNXMS.js";import{Db as $,Fb as u,Gb as f,Jb as y,Jc as Y,Kc as Z,La as A,Lb as q,Lc as ee,Mb as G,Nb as U,Pa as r,Q as N,Rb as p,Sb as _,Tb as H,Tc as te,Ua as b,Uc as ie,V as Q,Vb as g,Wb as k,Xb as h,Yb as L,Zb as w,_b as J,aa as D,ab as T,ba as I,f as V,g as O,gb as v,hc as K,kc as X,ob as m,rb as E,xb as n,yb as s,zb as c}from"./chunk-DKCBYRU7.js";import"./chunk-GAL4ENT6.js";var C=(()=>{class i{http;dialogConfig={visible:!1,header:"",newTask:!1};tasks=[];taskSource=new O(this.tasks);selectedTask=new V;dialogSource=new O(this.dialogConfig);taskSource$=this.taskSource.asObservable();selectedTask$=this.selectedTask.asObservable();dialogSource$=this.dialogSource.asObservable();constructor(e){this.http=e,this.http.get("/demo/data/tasks.json").toPromise().then(t=>t.data).then(t=>{this.tasks=t,this.taskSource.next(t)})}addTask(e){this.tasks.includes(e)?this.tasks=this.tasks.map(t=>t.id===e.id?e:t):this.tasks=[...this.tasks,e],this.taskSource.next(this.tasks)}removeTask(e){this.tasks=this.tasks.filter(t=>t.id!==e),this.taskSource.next(this.tasks)}onTaskSelect(e){this.selectedTask.next(e)}markAsCompleted(e){this.tasks=this.tasks.map(t=>t.id===e.id?e:t),this.taskSource.next(this.tasks)}showDialog(e,t){this.dialogConfig={visible:!0,header:e,newTask:t},this.dialogSource.next(this.dialogConfig)}closeDialog(){this.dialogConfig={visible:!1},this.dialogSource.next(this.dialogConfig)}static \u0275fac=function(t){return new(t||i)(Q(ae))};static \u0275prov=N({token:i,factory:i.\u0275fac})}return i})();var Be=["menu"],je=i=>({"line-through":i}),Pe=()=>({color:"#212121",border:"2px solid var(--surface-border)"});function Oe(i,d){if(i&1&&(n(0,"span",18),c(1,"i",19),p(2),s()),i&2){let e=f().$implicit;r(2),_(e.comments)}}function Ae(i,d){if(i&1&&(n(0,"span",18),c(1,"i",20),p(2),s()),i&2){let e=f().$implicit;r(2),_(e.attachments)}}function Re(i,d){if(i&1&&(n(0,"span",21),c(1,"i",22),p(2),s()),i&2){let e=f().$implicit,t=f();r(2),_(t.parseDate(e.startDate))}}function ze(i,d){if(i&1&&c(0,"p-avatar",23),i&2){let e=d.$implicit;y("image","/demo/images/avatar/",e.image,"")}}function Ve(i,d){if(i&1&&c(0,"p-avatar",24),i&2){let e=f().$implicit;E(w(4,Pe)),y("label","+ ",e.members.length-4,"")}}function Ne(i,d){if(i&1){let e=$();n(0,"li",4)(1,"div",5)(2,"p-checkbox",6),u("onChange",function(a){let l=D(e).$implicit,o=f();return I(o.onCheckboxChange(a,l))}),h("ngModelChange",function(a){let l=D(e).$implicit;return k(l.completed,a)||(l.completed=a),I(a)}),s(),n(3,"label",7),p(4),s()(),n(5,"div",8)(6,"div",9),v(7,Oe,3,1,"span",10)(8,Ae,3,1,"span",10)(9,Re,3,1,"span",11),s(),n(10,"div",12)(11,"p-avatarGroup",13),v(12,ze,1,2,"p-avatar",14),K(13,"slice"),v(14,Ve,1,5,"p-avatar",15),s(),n(15,"button",16),u("click",function(a){let l=D(e).$implicit,o=f();return I(o.toggleMenu(a,l))}),s(),c(16,"p-menu",17,0),s()()()}if(i&2){let e=d.$implicit,t=f();r(2),m("binary",!0),g("ngModel",e.completed),m("inputId",e.id.toString()),r(),m("ngClass",J(16,je,e.completed)),r(),_(e.name),r(3),m("ngIf",e.comments),r(),m("ngIf",e.attachments),r(),m("ngIf",e.startDate),r(3),m("ngForOf",X(13,12,e.members,0,4)),r(2),m("ngIf",e&&e.members&&e.members.length>4),r(2),m("popup",!0)("model",t.menuItems)}}var Ee=(()=>{class i{taskService;taskList;title;menu;menuItems=[];clickedTask;constructor(e){this.taskService=e}ngOnInit(){this.menuItems=[{label:"Edit",icon:"pi pi-pencil",command:()=>this.onEdit()},{label:"Delete",icon:"pi pi-trash",command:()=>this.handleDelete()}]}parseDate(e){return new Date(e).toUTCString().split(" ").slice(1,3).join(" ")}handleDelete(){this.taskService.removeTask(this.clickedTask.id)}toggleMenu(e,t){this.clickedTask=t,this.menu.toggle(e)}onEdit(){this.taskService.onTaskSelect(this.clickedTask),this.taskService.showDialog("Edit Task",!1)}onCheckboxChange(e,t){e.originalEvent.stopPropagation(),t.completed=e.checked,this.taskService.markAsCompleted(t)}static \u0275fac=function(t){return new(t||i)(b(C))};static \u0275cmp=T({type:i,selectors:[["app-task-list"]],viewQuery:function(t,a){if(t&1&&q(Be,5),t&2){let l;G(l=U())&&(a.menu=l.first)}},inputs:{taskList:"taskList",title:"title"},decls:5,vars:2,consts:[["menu",""],[1,"text-surface-900","dark:text-surface-0","font-semibold","text-lg","mt-8","mb-4","border-b","border-surface-200","dark:border-surface-700","py-4"],[1,"list-none","p-0","m-0"],["class","flex flex-col gap-4 md:flex-row md:items-center p-2 border-b border-surface-200 dark:border-surface-700",4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-4","md:flex-row","md:items-center","p-2","border-b","border-surface-200","dark:border-surface-700"],[1,"flex","items-center","flex-1"],[3,"onChange","ngModelChange","binary","ngModel","inputId"],["for","task.id",1,"font-medium","whitespace-nowrap","text-ellipsis","overflow-hidden","ml-2",2,"max-width","500px",3,"ngClass"],[1,"flex","flex-1","gap-4","flex-col","sm:flex-row","sm:justify-between"],[1,"flex","items-center"],["class","flex items-center font-semibold mr-4",4,"ngIf"],["class","flex items-center font-semibold whitespace-nowrap",4,"ngIf"],[1,"flex","items-center","sm:justify-end"],["styleClass","mr-4"],["size","large","shape","circle",3,"image",4,"ngFor","ngForOf"],["shape","circle","size","large","class","bg-blue-500",3,"label","style",4,"ngIf"],["pButton","","pRipple","","type","button","icon","pi pi-ellipsis-v","text","","rounded","",1,"z-30","ml-auto","sm:ml-0",3,"click"],["styleClass","w-32",3,"popup","model"],[1,"flex","items-center","font-semibold","mr-4"],[1,"pi","pi-comment","mr-2"],[1,"pi","pi-paperclip","mr-2"],[1,"flex","items-center","font-semibold","whitespace-nowrap"],[1,"pi","pi-clock","mr-2"],["size","large","shape","circle",3,"image"],["shape","circle","size","large",1,"bg-blue-500",3,"label"]],template:function(t,a){t&1&&(n(0,"div")(1,"div",1),p(2),s(),n(3,"ul",2),v(4,Ne,18,18,"li",3),s()()),t&2&&(r(2),H(" ",a.title," "),r(2),m("ngForOf",a.taskList))},dependencies:[ie,Y,Z,ee,te,me,le,ve,Ce,_e,be,ye,Te,M,x,P,S,j,W,B],encapsulation:2,changeDetection:0})}return i})();var Qe=()=>({height:"150px"}),$e=()=>({height:"2.5rem"});function qe(i,d){if(i&1&&(n(0,"div",20),c(1,"img",21),n(2,"span",22),p(3),s()()),i&2){let e=d.$implicit;r(),y("src","/demo/images/avatar/",e.image,"",A),m("alt",e.name),r(2),_(e.name)}}function Ge(i,d){if(i&1&&(n(0,"div",20),c(1,"img",21),n(2,"span",22),p(3),s()()),i&2){let e=d.$implicit;r(),y("src","/demo/images/avatar/",e.image,"",A),m("alt",e.name),r(2),_(e.name)}}var Le=(()=>{class i{memberService;messageService;taskService;task;members=[];filteredMembers=[];dialogConfig={header:"",visible:!1};subscription;dialogSubscription;constructor(e,t,a){this.memberService=e,this.messageService=t,this.taskService=a,this.subscription=this.taskService.selectedTask$.subscribe(l=>this.task=l),this.dialogSubscription=this.taskService.dialogSource$.subscribe(l=>{this.dialogConfig=l,this.dialogConfig.newTask&&this.resetTask()})}ngOnInit(){this.memberService.getMembers().then(e=>this.members=e),this.resetTask()}filterMembers(e){let t=[],a=e.query;for(let l=0;l<this.members.length;l++){let o=this.members[l];o.name?.toLowerCase().indexOf(a.toLowerCase())==0&&t.push(o)}this.filteredMembers=t}save(){this.task.id=Math.floor(Math.random()*1e3),this.messageService.add({severity:"success",summary:"Success",detail:`Task "${this.task.name}" created successfully.`}),this.taskService.addTask(this.task),this.taskService.closeDialog()}cancelTask(){this.resetTask(),this.taskService.closeDialog()}resetTask(){this.task={id:this.task&&this.task.id?this.task.id:Math.floor(Math.random()*1e3),status:"Waiting"}}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(t){return new(t||i)(b(De),b(F),b(C))};static \u0275cmp=T({type:i,selectors:[["app-create-task"]],features:[L([F])],decls:29,vars:18,consts:[["styleClass","mx-4 sm:mx-0 sm:w-full md:w-8/12 lg:w-6/12","contentStyleClass","rounded-b border-t border-surface-200 dark:border-surface-700 p-0",3,"visibleChange","header","visible","modal","dismissableMask"],[1,"p-6"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-12"],["for","name",1,"text-surface-900","dark:text-surface-0","font-semibold","block","mb-2"],["id","name","type","text","placeholder","Title","pInputText","",3,"ngModelChange","ngModel"],["for","description",1,"text-surface-900","dark:text-surface-0","font-semibold","block","mb-2"],[3,"ngModelChange","ngModel"],[1,"col-span-6"],["for","start",1,"text-surface-900","dark:text-surface-0","font-semibold","block","mb-2"],["appendTo","body","dateFormat","yy-mm-dd","inputId","start","placeholder","Start Date",3,"ngModelChange","showTime","ngModel"],["for","end",1,"text-surface-900","dark:text-surface-0","font-semibold","block","mb-2"],["appendTo","body","dateFormat","yy-mm-dd","inputId","end","placeholder","Due Date",3,"ngModelChange","showTime","ngModel"],["for","members",1,"text-surface-900","dark:text-surface-0","font-semibold","block","mb-2"],["appendTo","body","inputId","members","field","name","placeholder","Choose team members",3,"ngModelChange","completeMethod","ngModel","suggestions","multiple","inputStyle"],["pTemplate","selectedItem"],["pTemplate","item"],[1,"col-span-12","flex","justify-end","mt-6"],["pButton","","pRipple","","outlined","","icon","pi pi-times","label","Cancel",1,"w-32","mr-4",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Save",1,"w-32",3,"click"],[1,"flex","items-center"],[1,"h-8","w-8","mr-2",3,"src","alt"],[1,"text-surface-900","dark:text-surface-0","font-medium"]],template:function(t,a){t&1&&(c(0,"p-toast"),n(1,"p-dialog",0),h("visibleChange",function(o){return k(a.dialogConfig.visible,o)||(a.dialogConfig.visible=o),o}),n(2,"div",1)(3,"p-fluid",2)(4,"div",3)(5,"label",4),p(6,"Task Name"),s(),n(7,"input",5),h("ngModelChange",function(o){return k(a.task.name,o)||(a.task.name=o),o}),s()(),n(8,"div",3)(9,"label",6),p(10,"Description"),s(),n(11,"p-editor",7),h("ngModelChange",function(o){return k(a.task.description,o)||(a.task.description=o),o}),s()(),n(12,"div",8)(13,"label",9),p(14,"Start Date"),s(),n(15,"p-datepicker",10),h("ngModelChange",function(o){return k(a.task.startDate,o)||(a.task.startDate=o),o}),s()(),n(16,"div",8)(17,"label",11),p(18,"Due Date"),s(),n(19,"p-datepicker",12),h("ngModelChange",function(o){return k(a.task.endDate,o)||(a.task.endDate=o),o}),s()(),n(20,"div",3)(21,"label",13),p(22,"Add Team Member"),s(),n(23,"p-autocomplete",14),h("ngModelChange",function(o){return k(a.task.members,o)||(a.task.members=o),o}),u("completeMethod",function(o){return a.filterMembers(o)}),v(24,qe,4,4,"ng-template",15)(25,Ge,4,4,"ng-template",16),s()(),n(26,"div",17)(27,"button",18),u("click",function(){return a.cancelTask()}),s(),n(28,"button",19),u("click",function(){return a.save()}),s()()()()()),t&2&&(r(),m("header",a.dialogConfig.header||""),g("visible",a.dialogConfig.visible),m("modal",!0)("dismissableMask",!0),r(6),g("ngModel",a.task.name),r(4),E(w(16,Qe)),g("ngModel",a.task.description),r(4),m("showTime",!1),g("ngModel",a.task.startDate),r(4),m("showTime",!1),g("ngModel",a.task.endDate),r(4),g("ngModel",a.task.members),m("suggestions",a.filteredMembers)("multiple",!0)("inputStyle",w(17,$e)))},dependencies:[ge,fe,oe,xe,Se,j,ne,W,B,we,Me,ce,pe,M,x,he,ke,ue,de,re,se,S],encapsulation:2})}return i})();var jt=(()=>{class i{taskService;subscription;todo=[];completed=[];constructor(e){this.taskService=e,this.subscription=this.taskService.taskSource$.subscribe(t=>this.categorize(t))}categorize(e){this.todo=e.filter(t=>t.completed!==!0),this.completed=e.filter(t=>t.completed)}ngOnDestroy(){this.subscription.unsubscribe()}showDialog(){this.taskService.showDialog("Create Task",!0)}static \u0275fac=function(t){return new(t||i)(b(C))};static \u0275cmp=T({type:i,selectors:[["ng-component"]],features:[L([C])],decls:8,vars:2,consts:[[1,"card"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-surface-900","dark:text-surface-0","text-xl","font-semibold"],["pButton","","pRipple","","outlined","","icon","pi pi-plus","label","Create Task",1,"font-semibold",3,"click"],["title","ToDo",3,"taskList"],["title","Completed",3,"taskList"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"div",1)(2,"span",2),p(3,"Task List"),s(),n(4,"button",3),u("click",function(){return a.showDialog()}),s()(),c(5,"app-task-list",4)(6,"app-task-list",5),s(),c(7,"app-create-task")),t&2&&(r(5),m("taskList",a.todo),r(),m("taskList",a.completed))},dependencies:[M,x,Ee,Le,P,S],encapsulation:2})}return i})();export{jt as TaskList};
